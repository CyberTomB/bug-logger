import{r as t,c as e,o as a,a as o,b as s,F as n,d as r,S as c,C as i,u as l,$ as u,w as d,e as g,v as p,p as b,f as m,g as h,t as v,h as f,i as y,j as _,k as w,l as B,m as E,n as T,q as C,s as S,x as A}from"./vendor.6909166f.js";const O=t({user:{},account:{},bugs:[],chosenBug:{},notes:[]});const k={name:"App",setup:()=>({appState:e((()=>O))})},x={class:"container-fluid"},I=s("footer",null,[s("div",{class:"bg-dark text-light text-center p-4"}," Made by CyberTomb ")],-1);k.render=function(t,e,c,i,l,u){const d=r("Navbar"),g=r("router-view");return a(),o(n,null,[s("header",null,[s(d)]),s("main",null,[s("div",x,[s(g)])]),I],64)};const L=window.location.origin.includes("localhost"),P=L?"http://localhost:3000":"";function D(t,e){if(L)console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e);else{switch(t){case"log":case"assert":return}console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e)}}const U={log(){D("log",arguments)},error(){D("error",arguments)},warn(){D("warn",arguments)},assert(){D("assert",arguments)},trace(){D("trace",arguments)}};class N{static async confirm(t="Are you sure?",e="You won't be able to revert this!",a="warning",o="Yes, delete it!"){try{return!!(await c.fire({title:t,text:e,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:o})).isConfirmed}catch(s){return!1}}static toast(t="Warning!",e="warning",a="top-end",o=3e3,s=!0){c.fire({title:t,icon:e,position:a,timer:o,timerProgressBar:s,toast:!0,showConfirmButton:!1})}}const R=i.create({baseURL:P,timeout:8e3});const j=new class{async getAll(){try{const t=await R.get("api/bugs");U.log(t.data),O.bugs=t.data}catch(t){N.toast(t,"error")}}async getOneById(t){try{const e=await R.get("api/bugs/"+t);U.log(e.data),O.chosenBug=e.data}catch(e){N.toast(e,"error")}}async create(t){try{const e=await R.post("api/bugs",t);return U.log(e.data),O.bugs.unshift(e.data),e.data}catch(e){N.toast(e,"error")}}async edit(t,e){if(e.closed&&N.toast("This bug is closed!"),O.user.isAuthenticated&&O.account.id===e.creator.id)try{const a=await R.put("api/bugs/"+e.id,t);console.log("updated bug:",a.data),O.chosenBug=a.data,N.toast("Bug edited","success")}catch(a){N.toast(a)}else N.toast("You cannot edit this bug!")}async close(t){if(O.user.isAuthenticated&&O.account.id===t.creator.id)try{const e=await R.delete("api/bugs/"+t.id);console.log(e.data),O.chosenBug=e.data,N.toast("Bug closed.","success")}catch(e){N.toast(e)}else N.toast("You cannot close this bug!")}},V={setup(){const e=l(),a=t({bug:{title:"",description:""}});return{state:a,async createBug(){try{u("#createBugReport").modal("hide"),u("body").removeClass("modal-open"),u(".modal-backdrop").remove();const t=await j.create(a.bug);e.push({name:"Notes List",params:{bugId:t.id}}),N.toast("Bug Reported!","success")}catch(t){N.toast(t,"error")}}}}},M={class:"modal fade",id:"createBugReport",tabindex:"-1",role:"dialog","aria-labelledby":"Create Bug Report","aria-hidden":"true"},H={class:"modal-dialog",role:"form"},$={class:"modal-content"},z=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"bugReport"}," Bug Report: "),s("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",title:"Close"},[s("span",{"aria-hidden":"true"},"Ã—")])],-1),Y={class:"modal-body"},q={class:"form-group"},F=s("label",{for:"bug-title"},"Title:",-1),Q={class:"form-group"},W=s("label",{for:"bug-description"},"Description:",-1),K=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal","aria-label":"Close",title:"Close"}," Close "),s("button",{type:"submit",class:"btn btn-primary"}," Save changes ")],-1);V.render=function(t,e,n,r,c,i){return a(),o("div",M,[s("div",H,[s("div",$,[z,s("form",{onSubmit:e[3]||(e[3]=d(((...t)=>r.createBug&&r.createBug(...t)),["prevent"]))},[s("div",Y,[s("div",q,[F,g(s("input",{type:"text",name:"bug-title",id:"bug-title",maxlength:"80",placeholder:"New Bug",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>r.state.bug.title=t)},null,512),[[p,r.state.bug.title]])]),s("div",Q,[W,g(s("textarea",{name:"bug-description",id:"bug-description",minlength:"3",placeholder:"Tell us about it...",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>r.state.bug.description=t)},"\r\n              ",512),[[p,r.state.bug.description]])])]),K],32)])])])};var G=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:V});const X={props:{bug:{type:Object,required:!0}},setup(a){const o=t({editOn:!1,editedBug:{oldDescription:e((()=>O.chosenBug.description)),description:""}});return{state:o,account:e((()=>O.account)),edit(){a.bug.closed||(o.editOn=!o.editOn,o.editedBug.description=o.editedBug.oldDescription)},async closeBug(){O.account.id===a.bug.creator.id?a.bug.closed||await N.confirm("Are you sure you want to close this bug?",void 0,void 0,"Yes, close it.")&&await j.close(a.bug):a.bug.closed||N.toast("Only the creator can close their bugs.")},async submitEdit(){o.editOn=!o.editOn,await j.edit(o.editedBug,a.bug)},created:e((()=>{const t=new Date(a.bug.createdAt);return new Intl.DateTimeFormat("en-US").format(t)})),lastUpdated:e((()=>{const t=new Date(a.bug.updatedAt);return new Intl.DateTimeFormat("en-US").format(t)}))}}},Z=y("data-v-4bc1b868");b("data-v-4bc1b868");const J={class:"card"},tt={class:"card-header"},et={class:"bug-title"},at={class:"card-body"},ot={key:0},st={class:"input-group"},nt=s("button",{type:"submit",class:"btn btn-secondary col-2","aria-label":"Submit",title:"Submit"}," SUBMIT ",-1),rt={key:1},ct={class:"card-footer text-muted align-items-end d-flex"};m();const it=Z(((t,e,n,c,i,l)=>{const u=r("BugStatusBtn");return a(),o("div",J,[s("div",tt,[s("h2",et,[h(v(n.bug.title)+" ",1),s(u,{"bug-status":n.bug.closed,onClose:c.closeBug},{default:Z((()=>[h(v(n.bug.creator.id===c.account.id?"Close Bug?":null),1)])),_:1},8,["bug-status","onClose"]),n.bug.closed||c.account.id!==n.bug.creator.id?f("",!0):(a(),o("i",{key:0,class:"mdi mdi-pencil btn btn-yellow float-md-right",title:"Edit","aria-label":"Edit",onClick:e[1]||(e[1]=(...t)=>c.edit&&c.edit(...t))},"EDIT"))])]),s("div",at,[c.state.editOn?(a(),o("div",ot,[s("form",{onSubmit:e[3]||(e[3]=d(((...t)=>c.submitEdit&&c.submitEdit(...t)),["prevent"]))},[s("div",st,[g(s("textarea",{name:"note-body",id:"bug-description-form",cols:"100",rows:"5",class:"col-10","onUpdate:modelValue":e[2]||(e[2]=t=>c.state.editedBug.description=t)},null,512),[[p,c.state.editedBug.description]]),nt])],32)])):(a(),o("div",rt,[s("h4",null,v(n.bug.description),1)]))]),s("div",ct,[s("img",{src:n.bug.creator.picture,alt:n.bug.creator.name,title:n.bug.creator.name,class:"creator-picture img-fluid mr-3"},null,8,["src","alt","title"]),h(" Submitted by: "+v(n.bug.creator.name||"No Creator")+" | Created: "+v(c.created)+" | Last Update: "+v(c.lastUpdated),1)])])}));X.render=it,X.__scopeId="data-v-4bc1b868";var lt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:X});const ut={props:{bug:{type:Object,required:!0},index:{type:Number,required:!0}},setup:a=>({state:t({oddIndex:e((()=>!!(a.index%2)))}),lastUpdated:e((()=>{const t=new Date(a.bug.updatedAt);return new Intl.DateTimeFormat("en-US").format(t)}))})},dt=y("data-v-631ab461");b("data-v-631ab461");const gt={class:"col-3"},pt={class:"col-3"},bt={class:"col"},mt={class:"col-3"};m();const ht=dt(((t,e,n,c,i,l)=>{const u=r("BugStatusBtn"),d=r("router-link");return a(),o(d,{to:{name:"Notes List",params:{bugId:n.bug.id}},class:"card"},{default:dt((()=>[s("div",{class:["row py-1",c.state.oddIndex?"bg-grey":"bg-light"]},[s("div",gt,v(n.bug.title),1),s("div",pt,v(n.bug.creator.name),1),s("div",bt,v(c.lastUpdated),1),s("div",mt,[s(u,{"bug-status":n.bug.closed},null,8,["bug-status"])])],2)])),_:1},8,["to"])}));ut.render=ht,ut.__scopeId="data-v-631ab461";var vt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ut});const ft={props:{bugStatus:{type:Boolean,required:!0}},setup:e=>({state:t({hover:!1,openClass:"btn-warning mdi-progress-check",closedClass:"btn-success mdi-checkbox-marked-circle"})})},yt=y("data-v-713258ba")(((t,e,s,n,r,c)=>(a(),o("i",{class:["mx-2 mdi btn",[s.bugStatus?n.state.closedClass:n.state.openClass]],title:s.bugStatus?"Closed":"Open",onClick:e[1]||(e[1]=e=>t.$emit("close")),onMouseover:e[2]||(e[2]=t=>n.state.hover=!0),onMouseleave:e[3]||(e[3]=t=>n.state.hover=!1)},[n.state.hover&&!s.bugStatus?_(t.$slots,"default",{key:0},void 0,!0):f("",!0)],42,["title"]))));ft.render=yt,ft.__scopeId="data-v-713258ba";var _t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ft});const wt={props:{populate:{type:Object,default:()=>({})}},setup(t){const e={description:"example"};return w((()=>{e.description=t.populate.description})),{state:e}}},Bt={class:"input-group"},Et=s("button",{type:"submit",class:"btn btn-secondary col-2","aria-label":"Submit",title:"Submit"}," SUBMIT ",-1);wt.render=function(t,e,n,r,c,i){return a(),o("form",{onSubmit:e[2]||(e[2]=d((e=>t.$emit("submit")),["prevent"]))},[s("div",Bt,[g(s("textarea",{name:"note-body",id:"bug-description-form",cols:"100",rows:"5",class:"col-10","onUpdate:modelValue":e[1]||(e[1]=t=>r.state.description=t)},null,512),[[p,r.state.description]]),Et])],32)};var Tt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:wt});let Ct;const St={},At=function(t,e){if(!e||0===e.length)return t();if(void 0===Ct){const t=document.createElement("link").relList;Ct=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in St)return;St[t]=!0;const e=t.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const o=document.createElement("link");return o.rel=e?"stylesheet":Ct,e||(o.as="script",o.crossOrigin=""),o.href=t,document.head.appendChild(o),e?new Promise(((t,e)=>{o.addEventListener("load",t),o.addEventListener("error",e)})):void 0}))).then((()=>t()))};function Ot(t){return()=>function(t){switch(t){case"./pages/AccountPage.vue":return At((()=>import("./AccountPage.63f8b724.js")),["/assets/AccountPage.63f8b724.js","/assets/AccountPage.c36fe1d4.css","/assets/vendor.6909166f.js"]);case"./pages/BugDetailsPage.vue":return At((()=>import("./BugDetailsPage.cd7edb80.js")),["/assets/BugDetailsPage.cd7edb80.js","/assets/vendor.6909166f.js"]);case"./pages/BugsListPage.vue":return At((()=>import("./BugsListPage.0e5a0e54.js")),["/assets/BugsListPage.0e5a0e54.js","/assets/AccountPage.c36fe1d4.css","/assets/vendor.6909166f.js"]);case"./pages/HomePage.vue":return At((()=>import("./HomePage.f7985e81.js")),["/assets/HomePage.f7985e81.js","/assets/HomePage.71742320.css","/assets/vendor.6909166f.js"]);case"./pages/NotesListPage.vue":return At((()=>import("./NotesListPage.adfefa49.js")),["/assets/NotesListPage.adfefa49.js","/assets/vendor.6909166f.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+t))}}(`./pages/${t}.vue`)}const kt=[{path:"/",name:"Home",component:Ot("HomePage")},{path:"/about",name:"About",component:Ot("AboutPage")},{path:"/account",name:"Account",component:Ot("AccountPage"),beforeEnter:T},{path:"/bugs",name:"Bugs List",component:Ot("BugsListPage")},{path:"/bugs/:bugId",name:"Bug Details",component:Ot("BugDetailsPage"),children:[{path:"",name:"Notes List",component:Ot("NotesListPage")}]}],xt=B({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:E(),routes:kt});const It=new class{async getAccount(){try{const t=await R.get("/account");O.account=t.data}catch(t){U.error("HAVE YOU STARTED YOUR SERVER YET???",t)}}};let Lt=!1,Pt=[];const Dt="connected",Ut="authenticate",Nt="authenticated",Rt="error";const jt=new class extends class{constructor(t=P){this.socket=C(t||P),this.on(Dt,this.onConnected).on(Nt,this.onAuthenticated).on(Rt,this.onError)}on(t,e){return this.socket.on(t,e.bind(this)),this}onConnected(t){U.log("[SOCKET_CONNECTION]",t),Lt=!0}onAuthenticated(t){U.log("[SOCKET_AUTHENTICATED]",t);const e=[...Pt];Pt=[],e.forEach((t=>{this.emit(t.action,t.payload)}))}authenticate(t){this.socket.emit(Ut,t)}onError(t){U.error("[SOCKET_ERROR]",t)}emit(t,e){if(!Lt)return U.log("[ENQUEING_ACTION]",{action:t,payload:e}),Pt.push({action:t,payload:e});this.socket.emit(t,e)}}{constructor(){super(),this.on("error",this.onError)}onError(t){U.error("[SOCKET_ERROR]",t),N.toast(t.message,"error")}},Vt=S({domain:"cyberdack.us.auth0.com",clientId:"EZjygUXZPsH4EQYQQ6yQTpCWzVqFXaQj",audience:"https://Auth-Todo.com",useRefreshTokens:!0,onRedirectCallback:t=>{xt.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}});async function Mt(t){if(!Vt.isAuthenticated)return t;const e=1e3*Vt.identity.exp,a=e<Date.now(),o=e<Date.now()+432e5;return a?await Vt.loginWithPopup():o&&(await Vt.getTokenSilently(),R.defaults.headers.authorization=Vt.bearer,jt.authenticate(Vt.bearer)),t}Vt.on(Vt.AUTH_EVENTS.AUTHENTICATED,(async function(){R.defaults.headers.authorization=Vt.bearer,R.interceptors.request.use(Mt),O.user=Vt.user,await It.getAccount(),jt.authenticate(Vt.bearer),"Home"===xt.currentRoute.value.name&&xt.push({name:"Bugs List"})}));const Ht={setup:()=>({state:t({dropOpen:!1}),user:e((()=>O.user)),account:e((()=>O.account)),async login(){Vt.loginWithPopup()},async logout(){Vt.logout({returnTo:window.location.origin})}})},$t=y("data-v-d3396182");b("data-v-d3396182");const zt={class:"navbar navbar-expand-lg navbar-dark bg-dark"},Yt=s("div",{class:"d-flex flex-column align-items-center"},[s("h2",null," BUGSVILLE ")],-1),qt=s("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation",title:"Toggle navigation"},[s("span",{class:"navbar-toggler-icon"})],-1),Ft={class:"collapse navbar-collapse",id:"navbarText"},Qt={class:"navbar-nav mr-auto"},Wt={key:0,class:"nav-item"},Kt=h(" Home "),Gt={class:"navbar-text"},Xt={key:1,class:"dropdown"},Zt={class:"mx-3"},Jt=s("div",{class:"list-group-item list-group-item-action hoverable"}," Account ",-1);m();const te=$t(((t,e,n,c,i,l)=>{const u=r("router-link");return a(),o("nav",zt,[s(u,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:$t((()=>[Yt])),_:1}),qt,s("div",Ft,[s("ul",Qt,[c.account.id?(a(),o("li",Wt,[s(u,{to:{name:"Bugs List"},class:"nav-link"},{default:$t((()=>[Kt])),_:1})])):f("",!0)]),s("span",Gt,[c.user.isAuthenticated?(a(),o("div",Xt,[s("div",{class:"dropdown-toggle",onClick:e[2]||(e[2]=t=>c.state.dropOpen=!c.state.dropOpen)},[s("img",{src:c.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),s("span",Zt,v(c.user.name),1)]),s("div",{class:["dropdown-menu p-0 list-group w-100",{show:c.state.dropOpen}],onClick:e[4]||(e[4]=t=>c.state.dropOpen=!1)},[s(u,{to:{name:"Account"}},{default:$t((()=>[Jt])),_:1}),s("div",{class:"list-group-item list-group-item-action hoverable",onClick:e[3]||(e[3]=(...t)=>c.logout&&c.logout(...t))}," logout ")],2)])):(a(),o("button",{key:0,class:"btn btn-outline-primary text-uppercase",onClick:e[1]||(e[1]=(...t)=>c.login&&c.login(...t)),"aria-label":"Login",title:"Login"}," Login "))])])])}));Ht.render=te,Ht.__scopeId="data-v-d3396182";var ee=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ht});const ae=new class{async getAllByBugId(t){const e=await R.get("api/bugs/"+t+"/notes");U.log(e.data),O.notes=e.data}async create(t){if(O.user.isAuthenticated){const e=await R.post("api/notes",t);U.log(e.data),O.notes.unshift(e.data)}else N.toast("You must be logged in","error")}async destroy(t){if(O.user.isAuthenticated&&O.account.id===t.creator.id){const e=await R.delete("api/notes/"+t.id);N.toast(e.data.message,"success"),O.notes=O.notes.filter((e=>e.id!==t.id))}else N.toast("This is not your note.","error")}},oe={props:{note:{type:Object,required:!0}},setup:t=>({account:e((()=>O.account)),async deleteNote(){try{await ae.destroy(t.note)}catch(e){N.toast(e,"error")}}})},se={class:"card mb-3"},ne={class:"row g-0 align-items-center"},re={class:"col-3 text-center"},ce={class:"col-7"},ie={class:"card-body"},le={class:"card-title"},ue={class:"card-text"},de={class:"card-text border-top"},ge={class:"text-muted"},pe={class:"col-2"};oe.render=function(t,e,n,r,c,i){return a(),o("div",se,[s("div",ne,[s("div",re,[s("img",{src:n.note.creator.picture,class:"mx-2 creator-picture",alt:n.note.creator.name,title:n.note.creator.name},null,8,["src","alt","title"])]),s("div",ce,[s("div",ie,[s("small",le,v(n.note.creator.name),1),s("p",ue,v(n.note.body),1),s("p",de,[s("small",ge,v(n.note.createdAt)+" | "+v(n.note.updatedAt),1)])])]),s("div",pe,[r.account.id===n.note.creator.id?(a(),o("i",{key:0,class:"btn mdi mdi-delete btn-danger",title:"Delete Note",onClick:e[1]||(e[1]=(...t)=>r.deleteNote&&r.deleteNote(...t))})):f("",!0)])])])};var be=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:oe});const me=A(k);!function(t){const e={"./components/BugCreateModal.vue":G,"./components/BugDetailCard.vue":lt,"./components/BugListCard.vue":vt,"./components/BugStatusBtn.vue":_t,"./components/EditForm.vue":Tt,"./components/Navbar.vue":ee,"./components/NoteCard.vue":be};Object.entries(e).forEach((([e,a])=>{const o=a.name||e.substr(e.lastIndexOf("/")+1).replace(/\.\w+$/,"");t.component(o,a.default)}))}(me),me.use(xt).mount("#app");export{O as A,N as P,j as b,ae as n};
